<%
def svgo_data_uri(path, precision: 1)
  svgo = "node_modules/.bin/svgo"

  if File.exists?(svgo)
    asset = depend_on_asset(path)
    uri = `#{svgo} -i #{asset.filename} -o - -p #{precision} --multipass --enable=removeViewBox --datauri=unenc`.chomp
    %Q('#{uri}')
  else
    raise "svgo not installed, run `npm install`"
  end
end
%>

trix-toolbar .button_group button {
  &.bold::before { background-image: url(<%= svgo_data_uri('trix/images/bold.svg') %>); }
  &.italic::before { background-image: url(<%= svgo_data_uri('trix/images/italic.svg') %>); }
  &.link::before { background-image: url(<%= svgo_data_uri('trix/images/link.svg') %>); }
  &.hint::before { background-image: url(<%= svgo_data_uri('trix/images/hint.svg') %>); }
  &.strike::before { background-image: url(<%= svgo_data_uri('trix/images/strike.svg') %>); }
  &.quote::before { background-image: url(<%= svgo_data_uri('trix/images/quote.svg') %>); }
  &.code::before { background-image: url(<%= svgo_data_uri('trix/images/code.svg') %>); }
  &.bullets::before { background-image: url(<%= svgo_data_uri('trix/images/bullets.svg') %>); }
  &.numbers::before { background-image: url(<%= svgo_data_uri('trix/images/numbers.svg') %>); }
  &.block-level.decrease::before { background-image: url(<%= svgo_data_uri('trix/images/block_level_decrease.svg') %>); }
  &.block-level.increase::before { background-image: url(<%= svgo_data_uri('trix/images/block_level_increase.svg') %>); }
  &.undo::before { background-image: url(<%= svgo_data_uri('trix/images/undo.svg') %>); }
  &.redo::before { background-image: url(<%= svgo_data_uri('trix/images/redo.svg') %>); }
}
